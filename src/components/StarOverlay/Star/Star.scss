@function multiple-box-shadow ($n) {
    $value: '#{random(2000)}px #{random(2000)}px #FFF';

    @for $i from 2 through $n {
        $value: '#{$value} , #{random(2000)}px #{random(2000)}px #FFF';

    }

    @return unquote($value);
}

@mixin star($size, $box-shadow, $animation-duration) {
    width: $size;
    height: $size;
    box-shadow: $box-shadow;
    animation: moveStar $animation-duration linear infinite;

    &::after {
        width: $size;
        height: $size;
        box-shadow: $box-shadow;
    }
}

.star {
    $shadows-small: multiple-box-shadow(700);
    $shadows-medium: multiple-box-shadow(200);
    $shadows-big: multiple-box-shadow(100);
    $shooting-time: 3000ms;
    $star-speed: 50s;
    
    &--filing {
        background: transparent;
    
        &::after {
            content: '';
            position: absolute;
            top: 2000px;
            background: transparent;
        }
    }

    &--small {
        @include star(1px, $shadows-small, $star-speed);
    }

    &--medium {
        @include star(2px, $shadows-medium, $star-speed*2);
    }

    &--large {
        @include star(3px, $shadows-big, $star-speed*3);
    }

    &--falling {
        position: absolute;
        // width: 100px;
        height: 2px;
        background: linear-gradient(-45deg, #fff, rgba(0, 0, 255, 0));
        border-radius: 999px;
        filter: drop-shadow(0 0 6px #fff);
        animation:
          tail $shooting-time ease-in-out infinite,
          shooting $shooting-time ease-in-out infinite;

          &::before,
          &::after {
            content: '';
            position: absolute;
            top: calc(50% - 1px);
            right: 0;
            // width: 30px;
            height: 2px;
            background: linear-gradient(-45deg, rgba(0, 0, 255, 0), rgb(213, 224, 114), rgba(44, 44, 160, 0));
            transform: translateX(50%) rotateZ(45deg);
            border-radius: 100%;
            animation: shining $shooting-time ease-in-out infinite;
          }
        
          &::after {
            transform: translateX(50%) rotateZ(-45deg);
          }

          @for $i from 1 through 20 {
            &:nth-child(#{$i}) {
              $delay: random(9999) + 0ms;
              top: calc(50% - #{random(400) - 200px});
              left: calc(50% - #{random(300) + 0px});
              animation-delay: $delay;
              // opacity: random(50) / 100 + 0.5;
              
              &::before,
              &::after {
                animation-delay: $delay;
              }
            }
          }
    }
}

@keyframes moveStar {
    from {
        transform: translateY(0px)
    }

    to {
        transform: translateY(-2000px)
    }
}

@keyframes tail {
    0% {
      width: 0;
    }
    
    30% {
      width: 100px;
    }
    
    100% {
      width: 0;
    }
}
  
@keyframes shining {
    0% {
      width: 0;
    }
    
    50% {
      width: 30px;
    }
    
    100% {
      width: 0;
    }
}

@keyframes shooting {
    0% {
      transform: translateX(0);
    }
    
    100% {
      transform: translateX(300px);
    }
  }
